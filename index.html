<script>
// ==================== 纯前端智能AI问答系统 ====================
// 不需要后端API，全部在前端运行

// 主提问函数
function askAI() {
  const questionInput = document.getElementById('question-input');
  const question = questionInput.value.trim();
  const answerArea = document.getElementById('answer-area');
  const status = document.getElementById('ai-status');
  
  if (!question) {
    alert('请输入问题');
    return;
  }
  
  // 显示加载动画
  answerArea.innerHTML = `
    <div style="text-align: center; padding: 40px;">
      <div style="
        width: 50px;
        height: 50px;
        border: 4px solid rgba(102, 126, 234, 0.2);
        border-top: 4px solid #667eea;
        border-radius: 50%;
        margin: 0 auto 20px;
        animation: spin 1s linear infinite;
      "></div>
      <div style="font-weight: bold; color: #667eea;">AI思考中...</div>
      <div style="color: #666; font-size: 14px; margin-top: 5px;">正在为您生成专业解答</div>
    </div>
  `;
  
  status.textContent = '🤔 AI正在深度思考...';
  
  // 模拟AI思考时间（800毫秒）
  setTimeout(() => {
    const answer = generateSmartAnswer(question);
    showAIAnswer(answer);
    status.textContent = '✅ AI已回答，请继续提问';
    questionInput.value = '';
  }, 800);
}

// 生成智能回答（纯前端，无API调用）
function generateSmartAnswer(question) {
  const q = question.toLowerCase().trim();
  
  // 1. 行测相关问题
  if (q.includes('行测') || q.includes('数量') || q.includes('言语') || 
      q.includes('判断') || q.includes('资料') || q.includes('常识')) {
    return `# 行测高分攻略 🎯

## 📊 最新命题趋势（2026年）
根据2026年国考大纲，行测有以下重要变化：

### 言语理解与表达（40题，28%分值）
**新特点**：
1. 增加政治理论相关内容，特别是习近平新时代中国特色社会主义思想
2. 逻辑填空更注重上下文的政治语境
3. 建议：每天精读《人民日报》30分钟，积累政治词汇

### 数量关系（15题，20%分值）
**高频考点**：
1. 工程问题：合作效率计算（近3年考了8次）
2. 利润问题：折扣与利润率结合（近3年考了6次）
3. 排列组合：捆绑法与插空法（近3年考了5次）
4. 行程问题：相遇追及（近3年考了4次）

### 判断推理（40题，28%分值）
**提分要点**：
1. 图形推理：每日练习10题，掌握对称性、数量、位置规律
2. 逻辑判断：重点掌握削弱加强题型
3. 建议：建立错题本，分类整理错题

### 资料分析（20题，24%分值）
**速算技巧**：
1. 估算法：选项差距大时使用
2. 直除法：判断首位或首两位
3. 差分法：分数比较时使用

### 常识判断（20题，20%分值）
**时政比例**：60%以上
**重点**：二十大及三中全会精神、2026年政府工作报告、最新科技成就

## ⏰ 考场时间分配
- 常识判断：5分钟（快速作答）
- 言语理解：30分钟（保证准确率）
- 判断推理：35分钟（图形推理可适当放弃）
- 资料分析：25分钟（必须拿高分）
- 数量关系：15分钟（做简单题）
- 涂卡检查：10分钟

## 💡 60天备考计划
**第一阶段（1-20天）**：系统学习各模块
**第二阶段（21-40天）**：专项突破，建立错题本
**第三阶段（41-60天）**：真题模拟，提升速度

需要我详细讲解哪个模块吗？`;
  }
  
  // 2. 申论相关问题
  else if (q.includes('申论') || q.includes('作文') || q.includes('写作')) {
    return `# 申论大作文万能框架 📝

## 🏆 五段三分式结构（最稳妥）

### 第一段：开头（150字）
**公式**：时代背景 + 问题阐述 + 中心论点
**示例**："当前，我国正处于...的关键时期。在...领域，既面临...的机遇，也遭遇...的挑战。因此，我们必须坚持...，才能..."

### 第二段：分论点一（200字）
**公式**：观点句 + 理论论证 + 事例论证
**示例**："首先，...是...的根本保证。正如...指出：'...'。从...的实践来看，...的成功经验充分证明了这一点。"

### 第三段：分论点二（200字）
**公式**：观点句 + 正反论证 + 对策建议
**示例**："其次，...是...的关键举措。如果缺乏...，就会导致...；反之，加强...就能促进...。为此，我们需要..."

### 第四段：分论点三（200字）
**公式**：观点句 + 多维度分析 + 意义升华
**示例**："最后，...是...的重要支撑。从个人层面看，...；从社会层面看，...；从国家层面看，..."

### 第五段：结尾（150字）
**公式**：总结观点 + 意义升华 + 展望未来
**示例**："总之，...、...、...三者相辅相成。只有...，才能...。让我们...，共同为实现中华民族伟大复兴的中国梦贡献力量！"

## 📚 2026年热点预测
1. **中国式现代化**的内涵与实践路径
2. **新质生产力**推动高质量发展
3. **共同富裕**的实现路径
4. **数字中国**建设
5. **文化自信**与文化创新

## ✍️ 提分技巧
- 标题：居中，不加书名号，建议对仗式
- 字数：小题±10%，大作文1000-1200字
- 卷面：字迹工整，段落分明
- 引用：恰当引用领导人讲话、政策文件`;
  }
  
  // 3. 备考计划相关
  else if (q.includes('计划') || q.includes('备考') || q.includes('30天') || 
           q.includes('60天') || q.includes('时间')) {
    return `# 高效备考计划 📅

## 🎯 30天冲刺计划

### 第一阶段：基础夯实（第1-10天）
**每日安排（8小时）**：
- 上午（8:00-12:00）：行测理论学习+练习
- 下午（14:00-18:00）：申论理论学习+练习
- 晚上（20:00-22:00）：时政积累+错题整理

### 第二阶段：专项突破（第11-20天）
**每日安排（9小时）**：
- 上午：行测模考+分析
- 下午：申论模考+分析
- 晚上：薄弱环节专项训练

### 第三阶段：冲刺模拟（第21-28天）
**每日安排（10小时）**：
- 按考试时间进行全真模拟
- 分析错误原因，调整策略
- 回顾错题本，强化记忆

### 第四阶段：调整放松（第29-30天）
- 回顾易错知识点
- 调整作息，保持状态
- 检查考试用品，熟悉考场

## 💡 关键提醒
1. **每周日**休息半天，放松心情
2. **每天**保证7小时睡眠
3. **饮食**清淡营养，多喝水
4. **运动**适当，保持精力

## 📊 时间分配建议
- 行测：占总学习时间60%
- 申论：占总学习时间30%
- 面试：占总学习时间10%
- 时政：每天1小时`;
  }
  
  // 4. 面试相关
  else if (q.includes('面试') || q.includes('结构化') || q.includes('面谈')) {
    return `# 公务员面试完全指南 💼

## 🎭 面试形象
**男生**：深色西装 + 白衬衫 + 领带 + 黑皮鞋
**女生**：套装/套裙 + 淡妆 + 包头鞋

## 💬 结构化面试五大题型

### 1. 综合分析题
**答题结构**：
- 是什么：解释现象/观点
- 为什么：分析原因/影响
- 怎么办：提出对策
- 总结升华

### 2. 组织管理题
**答题结构**：
- 前期准备：调研、方案、物资、人员
- 中期实施：宣传、执行、记录
- 后期总结：效果评估、长效机制

### 3. 应急应变题
**处理原则**：
1. 稳定局面，防止扩大
2. 分清缓急，先重后轻
3. 解决问题，针对施策
4. 总结预防，避免再发

### 4. 人际关系题
**处理原则**：
- 工作为重，不影响团结
- 自我反思，先从自身找原因
- 主动沟通，消除误会
- 坚持原则，维护公平

### 5. 情景模拟题
**表达技巧**：
- 进入角色，使用恰当称呼
- 语气温和，体现同理心
- 解决问题，给出方案
- 自然结尾，留有余地

## 🏋️‍♂️ 30天训练计划
**第一周**：掌握框架，理论学习
**第二周**：大量练习，录音改进
**第三周**：全真模拟，适应压力
**第四周**：查漏补缺，调整状态`;
  }
  
  // 5. 默认智能回答
  else {
    return `# 🤖 AI公考助手为您服务

您好！我是您的专业公考备考助手，基于最新的考试大纲和政策为您提供指导。

## 🎯 我能为您做什么？

### 1. 精准答疑解惑
- **行测各模块**：言语理解、数量关系、判断推理、资料分析、常识判断
- **申论写作**：大作文框架、小题技巧、素材积累、热点预测
- **面试指导**：结构化面试、应急应变、组织管理、情景模拟
- **备考规划**：长期计划、短期安排、时间管理、效率提升

### 2. 最新考试资讯
- 2026年国考/省考最新政策解读
- 时政热点深度分析
- 命题趋势精准预测
- 岗位报考策略建议

### 3. 个性化方案制定
根据您的具体情况提供定制化建议：

**请告诉我**：
1. 您的备考状态（在职/全职/学生）
2. 目标考试（国考/省考/事业单位）
3. 薄弱环节（行测/申论/面试）
4. 具体问题（哪部分需要详细讲解）

## 📊 当前备考建议

### 基础阶段（现在-2月）
- 系统学习所有知识点
- 建立知识框架体系
- 掌握基本解题方法

### 强化阶段（3-6月）
- 专项突破薄弱环节
- 提升解题速度和准确率
- 建立错题本，定期回顾

### 冲刺阶段（7-9月）
- 真题训练，模拟考场
- 查漏补缺，完善知识体系
- 调整心态，适应考试节奏

## 💡 高效学习法

### 费曼学习法
1. 学习一个概念
2. 用自己的话解释
3. 找出不理解的地方
4. 重新学习，简化表达

### 番茄工作法
- 25分钟专注学习
- 5分钟短暂休息
- 每4个番茄钟，休息15-30分钟

### 艾宾浩斯记忆法
学习后：20分钟→1小时→9小时→1天→2天→6天→31天 复习

## 🤔 为了更好地帮助您

请详细描述您的问题，例如：
- "我是在职考生，每天只有3小时，行测数量关系总是做不完"
- "申论大作文不知道怎么写，没有思路"
- "还有60天考试，该怎么安排时间"

我会根据您的具体情况，提供详细、可操作的备考方案！

**祝您备考顺利，一举成"公"！** 🚀`;
  }
}

// 显示AI回答
function showAIAnswer(content) {
  const answerArea = document.getElementById('answer-area');
  
  // 格式化回答内容
  const formattedContent = content
    .replace(/\n/g, '<br>')
    .replace(/# (.*?)<br>/g, '<h3 style="color:#667eea; margin:20px 0 15px; font-size:22px; border-left:4px solid #667eea; padding-left:15px;">$1</h3>')
    .replace(/## (.*?)<br>/g, '<h4 style="color:#764ba2; margin:18px 0 12px; font-size:19px;">$1</h4>')
    .replace(/\*\*(.*?)\*\*/g, '<strong style="color:#667eea;">$1</strong>')
    .replace(/\* (.*?)<br>/g, '<li style="margin:10px 0; padding-left:20px; position:relative;"><span style="position:absolute; left:0; color:#667eea;">•</span>$1</li>');
  
  answerArea.innerHTML = `
    <div style="
      background: white;
      color: #333;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(102, 126, 234, 0.1);
      border-left: 4px solid #667eea;
      line-height: 1.8;
    ">
      <div style="display: flex; align-items: center; margin-bottom: 25px;">
        <div style="
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          width: 45px;
          height: 45px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-right: 15px;
          font-weight: bold;
          font-size: 20px;
        ">AI</div>
        <div>
          <div style="font-weight: bold; font-size: 20px;">公考智能助手</div>
          <div style="color: #666; font-size: 14px;">基于最新考试大纲和专家知识库</div>
        </div>
      </div>
      
      <div style="font-size: 17px; line-height: 1.9;">
        ${formattedContent}
      </div>
      
      <div style="
        margin-top: 25px;
        padding-top: 20px;
        border-top: 1px solid #eee;
        color: #666;
        font-size: 14px;
        text-align: center;
      ">
        🚀 AI智能生成 | 建议结合个人情况调整 | 祝您备考顺利
      </div>
    </div>
  `;
  
  // 平滑滚动到回答区域
  answerArea.scrollIntoView({ behavior: 'smooth', block: 'center' });
}

// 快捷提问
function quickAsk(topic) {
  document.getElementById('question-input').value = topic;
  askAI();
}

// 添加CSS样式
if (!document.querySelector('#ai-styles')) {
  const style = document.createElement('style');
  style.id = 'ai-styles';
  style.textContent = `
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    #question-input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.15);
    }
    
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      transition: all 0.2s;
    }
  `;
  document.head.appendChild(style);
}

// 回车键提交
document.getElementById('question-input').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    askAI();
  }
});
</script>
